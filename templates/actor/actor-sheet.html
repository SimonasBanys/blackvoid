<form class="{{cssClass}} flexcol" autocomplete="off">

    {{!-- Sheet Header --}}
    <header class="sheet-header">
        <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100" width="100"/>
        <div class="header-fields">
            <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h1>
            {{!-- The grid classes are defined in scss/global/_grid.scss. To use,
            use both the "grid" and "grid-Ncol" class where "N" can be any number
            from 1 to 12 and will create that number of columns.  --}}
            <div class="resources grid grid-2col">
              {{!-- "flex-group-center" is also defined in the _grid.scss file
              and it will add a small amount of padding, a border, and will
              center all of its child elements content and text. --}}
              <div class="resource flex-group-center">
                  <label for="data.health.value" class="resource-label" data-roll="d12" data-label="HEALTH">Health</label>
                  <div class="resource-content flexrow flex-center flex-between">
                    <input type="text" name="data.health.value" value="{{data.health.value}}" data-dtype="Number"/>
                    <span> / </span>
                    <input readonly type="text" name="hitPointMaximum" value="{{hitPointMaximum}}" data-dtype="Number"/>
                  </div>
              </div>
              <div class="resource flex-group-center">
                  <label for="data.sanity.value" class="resource-label" data-label="SANITY">Sanity</label>
                  <div class="resource-content flexrow flex-center flex-between">
                    <input type="text" name="data.sanity.value" value="{{data.sanity.value}}" data-dtype="Number"/>
                    <span> / </span>
                    <input readonly type="text" name="sanityMaximum" value="{{sanityMaximum}}" data-dtype="Number"/>
                  </div>
              </div>
          </div>
          {{!-- The grid classes are defined in scss/global/_grid.scss. To use,
          use both the "grid" and "grid-Ncol" class where "N" can be any number
          from 1 to 12 and will create that number of columns.  --}}
          <div class="abilities grid grid-4col">
            {{#each data.abilities as |ability key|}}
              <div class="ability flexrow flex-group-center">
                <label for="data.abilities.{{key}}.value" class="resource-label rollable" data-roll="d12+@abilities.{{key}}.mod+@abilities.{{key}}.mod" data-label="{{key}}">{{key}}</label>
                <input type="text" name="data.abilities.{{key}}.value" value="{{ability.value}}" data-dtype="Number"/>
                <span class="ability-mod">({{numberFormat ability.mod decimals=0 sign=true}})</span>
              </div>
            {{/each}}
          </div>

          <div class="abilities grid grid-2col">
            <div class="ability flexrow flex-group-center">
              <label for="speed" class="resource-label">Speed</label>
              <input readonly type="text" name="speed" value="{{speed}}" data-dtype="Number"/>
            </div>

            <div class="ability flexrow flex-group-center">
              <label for="defenceValue" class="resource-label">Defence Value</label>
              <input readonly type="text" name="defenceValue" value="{{defenceValue}}" data-dtype="Number"/>
            </div>
          </div>
        </div>
    </header>

    {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="biography">Biography</a>

        {{#if showTalentsTab}}
        <a class="item" data-tab="talents">Talents/Flaws</a>
        {{/if}}

        {{#if hasBackgrounds}}
        <a class="item" data-tab="backgrounds">Backgrounds</a>
        {{/if}}
        
        {{#if hasAttributes}}
        <a class="item" data-tab="charattributes">Attributes</a>
        {{/if}}

        {{#if hasPowers}}
        <a class="item" data-tab="powers">Powers</a>
        {{/if}}

        {{#if showSkillsTab}}
        <a class="item" data-tab="skills">Skills</a>
        {{/if}}

        <a class="item" data-tab="inventory">Inventory</a>
        <a class="item" data-tab="progression">Progression</a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">

        {{!-- Biography Tab | DONE --}}
        <div class="tab biography" data-group="primary" data-tab="biography">
          <h1>Biography</h1>
          {{editor content=data.biography target="data.biography" button=true owner=owner editable=editable}}
        </div>

        {{!-- Talents Tab | DONE --}}
        <div class="tab talents" data-group="primary" data-tab="talents">
          {{#if hasTalents}}
          <h1>Talents</h1>
            <div class="abilities grid grid-3col">
              <div class="ability flexrow flex-group-center no-border">
                <p><b>Name</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Trait</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Controls</b></p>
              </div>
            </div>

              {{#each talents as |item id|}}
              <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.associatedAbility}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>

              <p>{{{item.data.description}}}</p>
              {{/each}}
          {{/if}}

          {{#if hasFlaws}}
            <h1>Flaws</h1>
            <div class="abilities grid grid-4col">
              <div class="ability flexrow flex-group-center no-border">
                <p><b>Name</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Trait</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Severity</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Controls</b></p>
              </div>
            </div>

            {{#each flaws as |item id|}}
            <div class="abilities grid grid-4col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h3 class="item-name">{{item.data.flawName}}</h3>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h3 class="item-name">{{item.data.associatedAbility}}</h3>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h3 class="item-name">{{item.data.severity}}</h3>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>

            <p>{{{item.data.description}}}</p>
            {{/each}}
          {{/if}}
        </div>

        {{!-- Backgrounds Tab | DONE --}}
        <div class="tab backgrounds" data-group="primary" data-tab="backgrounds">
          <h1>Backgrounds</h1>
          <div class="abilities grid grid-3col">
            <div class="ability flexrow flex-group-center no-border">
              <p><b>Name</b></p>
            </div>

            <div class="ability flexrow flex-group-center no-border">
              <p><b>Cost</b></p>
            </div>

            <div class="ability flexrow flex-group-center no-border">
              <p><b>Controls</b></p>
            </div>
          </div>

            {{#each backgrounds as |item id|}}
            <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h3 class="item-name">{{item.name}}</h3>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h3 class="item-name">{{item.data.cost}}</h3>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>

            <p>{{{item.data.description}}}</p>
            {{/each}}
        </div>

        {{!-- Attributes Tab | DONE --}}
        <div class="tab charattributes" data-group="primary" data-tab="charattributes">
          <h1>Attributes</h1>
          <div class="abilities grid grid-3col">
            <div class="ability flexrow flex-group-center no-border">
              <p><b>Name</b></p>
            </div>

            <div class="ability flexrow flex-group-center no-border">
              <p><b>Cost</b></p>
            </div>

            <div class="ability flexrow flex-group-center no-border">
              <p><b>Controls</b></p>
            </div>
          </div>

            {{#each characterattributes as |item id|}}
              <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
                  <div class="ability flexrow flex-group-center no-border">
                    <h3 class="item-name">{{item.name}}</h3>
                  </div>

                  <div class="ability flexrow flex-group-center no-border">
                    <h3 class="item-name">{{item.data.cost}}</h3>
                  </div>

                  <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                  </div>
              </div>

              <p>{{{item.data.description}}}</p>
            {{/each}}
          
          {{#if hasEsotericAttributes}}
            <h1>Esoteric Attributes</h1>
            <div class="abilities grid grid-3col">
              <div class="ability flexrow flex-group-center no-border">
                <p><b>Name</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Cost</b></p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p><b>Controls</b></p>
              </div>
            </div>

              {{#each esotericattributes as |item id|}}
              <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.cost}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>

              <p>{{{item.data.description}}}</p>
              {{/each}}
            {{/if}}
        </div>

        {{!-- Powers Tab --}}
        <div class="tab powers" data-group="primary" data-tab="powers">
          <h1>Powers</h1>
          
          {{#if hasMethods}}
            <h2>Methods</h2>

            <div class="abilities grid grid-3col">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Ranks</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each methods as |item id|}}
              <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name rollable" data-roll="d12+{{item.data.ranks}}" data-label="METHOD_{{item.name}}">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.ranks}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>
            {{/each}}
          {{/if}}

          {{#if isMystic}}
            <h2>Phenomena</h2>
            <div class="item-controls">
              <a class="item-control item-create" title="Create item" data-type="phenomenon"><i class="fas fa-plus"></i>Create</a>
            </div>
            
            <div class="abilities grid grid-2col">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each phenomena as |item id|}}
              <div class="abilities grid grid-2col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name rollable" data-roll="d12" data-table="{{item.data.table}}" data-label="PHENOMENON_{{item.name}}">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>

              {{{item.data.table}}}
            {{/each}}

            <h2>Mysticism Chart</h2>

            <table>
              <tr>
                <th>Channelling Time</th>
                <th>Range</th>
                <th>Duration</th>
                <th>Area (PEOPLE/OBJECT/DIAMETER)</th>
                <th>Potency</th>
              </tr>

              <tr>
                <td>30 minutes</td>
                <td>0 metres</td>
                <td>Instant</td>
                <td>0 / tiny / 25 cm</td>
                <td>0</td>
              </tr>

              <tr>
                <td>5 minutes</td>
                <td>3 metres</td>
                <td>9 seconds</td>
                <td>1 / little / 0.5 m</td>
                <td>1</td>
              </tr>

              <tr>
                <td>1 minute</td>
                <td>9 metres</td>
                <td>15 seconds</td>
                <td>3 / small / 1 m</td>
                <td>2</td>
              </tr>

              <tr>
                <td>9 seconds / 3 rounds</td>
                <td>15 metres</td>
                <td>1 minute</td>
                <td>9 / medium / 2 m</td>
                <td>3</td>
              </tr>

              <tr>
                <td>3 seconds / 1 round</td>
                <td>30 metres</td>
                <td>15 minutes</td>
                <td>15 / large / 4 m</td>
                <td>4</td>
              </tr>

              <tr>
                <td>1 second / initiative - 4</td>
                <td>60 metres</td>
                <td>30 minutes</td>
                <td>30 / huge / 6 m</td>
                <td>5</td>
              </tr>

              <tr>
                <td>Instant / initiative</td>
                <td>120 metres</td>
                <td>1 hour</td>
                <td>60 / gargantuan / 12 m</td>
                <td>6</td>
              </tr>
            </table>

            <h2>Spheres of Mysticism</h2>

            <div class="abilities grid grid-3col">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Ranks</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each spheres as |item id|}}
              <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name rollable" data-roll="d12+{{item.data.ranks}}" data-label="SKILL_{{item.name}}">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.ranks}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>

              {{{item.data.description}}}
            {{/each}}
          {{/if}}

          {{#if hasBloodletting}}
            <h2>Bloodletting Chart</h2>

            <table>
              <tr>
                <th>Blood Potency</th>
                <th>Difficulty</th>
                <th>Boon Mod.</th>
                <th>Ritual Time</th>
                <th>Boon Duration</th>
                <th>Backlash Mod.</th>
              </tr>

              <tr>
                <td>&le;8</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
              </tr>

              <tr>
                <td>9-16</td>
                <td>7+</td>
                <td>-3</td>
                <td>D6 minutes</td>
                <td>12 hours</td>
                <td>-3</td>
              </tr>

              <tr>
                <td>17-24</td>
                <td>10+</td>
                <td>0</td>
                <td>2D6 minutes</td>
                <td>18 hours</td>
                <td>0</td>
              </tr>

              <tr>
                <td>25-40</td>
                <td>13+</td>
                <td>+1</td>
                <td>4D6 minutes</td>
                <td>24 hours</td>
                <td>+1</td>
              </tr>

              <tr>
                <td>41-64</td>
                <td>16+</td>
                <td>+2</td>
                <td>6D6 minutes</td>
                <td>36 hours</td>
                <td>+2</td>
              </tr>

              <tr>
                <td>65+</td>
                <td>19+</td>
                <td>+3</td>
                <td>8D6 minutes</td>
                <td>48 hours</td>
                <td>+3</td>
              </tr>
            </table>

            <table>
              <tr>
                <th>Ranking 1</th>
                <td>The practitioner may perform one bloodletting ritual per day imbuing a boon on themselves. On a successful ritual, make a roll on the boons and fortunes table and apply the result.</td>
              </tr>

              <tr>
                <th>Ranking 2</th>
                <td>The character can perform one ritual per day infusing a boon on themselves. On a successful ritual, the character makes an imbuement roll and adds +1 to the potency roll before applying the result.</td>
              </tr>

              <tr>
                <th>Ranking 3</th>
                <td>The ritualist may perform up to two ceremonies per day and can confer extracted boons on themselves or on another. The character may add +1 to the potency die and choose the boon freely from the cluster of results.</td>
              </tr>

              <tr>
                <th>Ranking 4</th>
                <td>The practitioner is able to perform two bloodletting rituals per day, confer extracted boons on themselves or on another, and add +2 to the potency roll on the boons and fortunes table. The player can choose a boon at will from the cluster of results.</td>
              </tr>

              <tr>
                <th>Ranking 5</th>
                <td>The ritualist may perform three ceremonies per day and confer the boon to up to three others. The player may add +2 to the potency dice and choose a boon from any cluster up to the rolled result.</td>
              </tr>

              <tr>
                <th>Ranking 6</th>
                <td>The character can perform up to three bloodletting rituals per day and may add +3 to the potency roll on the boons and fortunes table. The boon can be conferred on up to three people and may be chosen from any effect up to the rolled results.</td>
              </tr>
            </table>
          {{/if}}
          
          {{#if hasSacrificialDivination}}
            <h2>Sacrificial Divination Chart</h2>

            <table>
              <tr>
                <th>Query</th>
                <th>Requirements</th>
                <th>Insight</th>
                <th>Difficulty</th>
                <th>Backlash</th>
              </tr>

              <tr>
                <td>Yes-No</td>
                <td>Ranking 1</td>
                <td>Simple possibility</td>
                <td>7</td>
                <td>0</td>
              </tr>

              <tr>
                <td>Prospect</td>
                <td>Ranking 2</td>
                <td>The likelihood of a specified outcome</td>
                <td>10</td>
                <td>+1</td>
              </tr>

              <tr>
                <td>Guided Closed</td>
                <td>Ranking 3</td>
                <td>The probabilities of multiple options</td>
                <td>13</td>
                <td>+1</td>
              </tr>

              <tr>
                <td>Guided Open</td>
                <td>Ranking 4</td>
                <td>Prospective effects on a designated cause</td>
                <td>16</td>
                <td>+2</td>
              </tr>

              <tr>
                <td>Indistinct Open</td>
                <td>Ranking 5</td>
                <td>Potential outcomes of supposed causes</td>
                <td>19</td>
                <td>+2</td>
              </tr>

              <tr>
                <td>Open</td>
                <td>Ranking 6</td>
                <td>Possible occurrences with no set premise</td>
                <td>22</td>
                <td>+3</td>
              </tr>
            </table>

            <table>
              <tr>
                <th>Ranking 1</th>
                <td>The character may perform one divination per day. The player can make a simple inquiry to know whether an outcome to a course of action or a prospect is possible or not. Questions such as “Is it possible that I can find my daughter in the slave market in Khameeliya tomorrow?” qualify for this divination.</td>
              </tr>

              <tr>
                <th>Ranking 2</th>
                <td>The practitioner can perform one sacrificial divination per day. The player may make a simple query to know whether an outcome to a course of action is likely or unlikely. Inquiries in the vein of “If I search the alley behind the temple for hidden entrances am I likely to succeed?” are suitable for this foretelling.</td>
              </tr>

              <tr>
                <th>Ranking 3</th>
                <td>The character may perform two divination rituals per day and is able to pose a compound question with several possible outcomes, learning the likelihood of each if possible. Musings along the lines of “If I enter the palace through the harem am I likely to meet resistance or help from the concubines there?” are eligible.</td>
              </tr>

              <tr>
                <th>Ranking 4</th>
                <td>The seer can perform two sacrificial divination rituals per day. A complex query may be posed with the portent indicating possible outcomes although in vague terms. Queries such as “What might happen if I murder the slaver that sold my family?” would qualify.</td>
              </tr>

              <tr>
                <th>Ranking 5</th>
                <td>The practitioner may perform three rituals per day interpreting conceivable consequences to complex queries. Questions such as “How could it affect my plans if a Je’ehl envoy arrives tomorrow?” are applicable.</td>
              </tr>

              <tr>
                <th>Ranking 6</th>
                <td>The character can perform three divinations per day. Complex queries may be answered potentially revealing unforeseen aspects of the inquiry itself. Queries like “What does my future hold?” would suit for this divination.</td>
              </tr>
            </table>
          {{/if}}
        </div>

        {{!-- Skills Tab | DONE--}}
        <div class="tab skills" data-group="primary" data-tab="skills">
          {{#if hasSkills}}
            <h1>Skills</h1>

            <div class="abilities grid grid-4col">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Ranks</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Specialisation</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each skills as |item id|}}
              <div class="abilities grid grid-4col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name rollable" data-roll="d12+{{item.data.ranks}}" data-label="SKILL_{{item.name}}">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.ranks}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.specialisation}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>
            {{/each}}
          {{/if}}

          {{#if hasCombatSkills}}        
            <h1>Combat Skills</h1>

            <div class="abilities grid grid-4col">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Ranks</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Specialisation</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each combatskills as |item id|}}
              <div class="abilities grid grid-4col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name rollable" data-roll="d12+{{item.data.ranks}}+@abilities.agi.mod" data-label="ATTACK_{{item.name}}">{{item.name}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.ranks}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h3 class="item-name">{{item.data.specialisation}}</h3>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>
            {{/each}}
          {{/if}}
        </div>

        {{!-- Inventory Tab | DONE--}}
        <div class="tab inventory" data-group="primary" data-tab="inventory">

          <h1>Inventory</h1>

          <div class="ability flexrow no-border">
            <label for="data.dhins" class="resource-label">Copper Dhins</label>
            <input type="text" name="data.dhins" value="{{data.dhins}}" data-dtype="Number"/>
          </div>

          {{#if hasGeneralItems}}
            <h2>General Items</h2>

            <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Quantity</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <p>Controls</p>
              </div>
            </div>

            {{#each generalitems as |item id|}}
            <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.name}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.quantity}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>
            {{/each}}
          {{/if}}
          
          {{#if hasTools}}
            <h2>Tools</h2>

            <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Quantity</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <p>Controls</p>
              </div>
            </div>

            {{#each tools as |item id|}}
            <div class="abilities grid grid-3col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.name}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.quantity}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>

            {{{item.data.toolDescription}}}

            {{/each}}
          {{/if}}

          {{#if hasWeapons}}
            <h2>Weapons</h2>

            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Type</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Range</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Damage</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each weapons as |item id|}}
            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name rollable" data-roll="{{item.data.damage}}" data-label="DAMAGE_{{item.name}}">{{item.name}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.type}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.range}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.damage}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>

            <p><i>Properties: {{{item.data.properties}}}</i></p>
            {{/each}}
          {{/if}}

          {{#if hasArmour}}
            <h2>Armour</h2>

            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Material</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Category</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Dmg Red</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each armour as |item id|}}
            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.name}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.material}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.category}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.dmgred}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>

            <p><i>Bulk: {{{item.data.bulk}}} ||| Properties: {{{item.data.armorProperties}}}</i></p>
            {{/each}}
          {{/if}}

          {{#if hasShields}}
            <h2>Shields</h2>

            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Defence Mod.</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Bulk</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Properties</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each shields as |item id|}}

            <div class="abilities grid grid-5col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.name}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.defenceMod}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.bulk}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <h4 class="item-name">{{item.data.properties}}</h4>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                  <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                  <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
              </div>
            </div>
            {{/each}}
          {{/if}}

          {{#if hasConsumables}}
            <h2>Consumables</h2>

            <div class="abilities grid grid-4col item flexrow" data-item-id="{{item._id}}">
              <div class="ability flexrow flex-group-center no-border">
                <p>Name</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Type</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Effect</p>
              </div>

              <div class="ability flexrow flex-group-center no-border">
                <p>Controls</p>
              </div>
            </div>

            {{#each consumables as |item id|}}
              <div class="abilities grid grid-4col item flexrow" data-item-id="{{item._id}}">
                <div class="ability flexrow flex-group-center no-border">
                  <h4 class="item-name">{{item.name}}</h4>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h4 class="item-name">{{item.data.consumableType}}</h4>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                  <h4 class="item-name">{{item.data.effect}}</h4>
                </div>

                <div class="ability flexrow flex-group-center no-border">
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                </div>
              </div>
            {{/each}}
          {{/if}}

        </div>

        {{!-- Progression Tab | DONE--}}
        <div class="tab progression" data-group="primary" data-tab="progression">
          <h1>Progression</h1>

          <h2>Experience</h2>

          <div class="abilities grid grid-2col">
            <div class="ability flexrow flex-group-center">
              <label for="data.experience" class="resource-label">Current Experience</label>
              <input type="text" name="data.experience" value="{{data.experience}}" data-dtype="Number"/>
            </div>

            <div class="ability flexrow flex-group-center">
              <label for="data.totalExperience" class="resource-label">Total Experience</label>
              <input type="text" name="data.totalExperience" value="{{data.totalExperience}}" data-dtype="Number"/>
            </div>
          </div>

          <h2>Starting Rolls</h2>

          <div class="abilities grid grid-2col">
            <div class="ability flexrow flex-group-center">
              <label for="data.rolledHP" class="resource-label">Health</label>
              <input type="text" name="data.rolledHP" value="{{data.rolledHP}}" data-dtype="Number"/>
            </div>

            <div class="ability flexrow flex-group-center">
              <label for="data.rolledSanity" class="resource-label">Sanity</label>
              <input type="text" name="data.rolledSanity" value="{{data.rolledSanity}}" data-dtype="Number"/>
            </div>
          </div>

          <h2>Bonus Health + Sanity</h2>

          <div class="abilities grid grid-2col">
            <div class="ability flexrow flex-group-center">
              <label for="data.rolledHP" class="resource-label">Health</label>
              <input type="text" name="data.bonusHP" value="{{data.bonusHP}}" data-dtype="Number"/>
            </div>

            <div class="ability flexrow flex-group-center">
              <label for="data.bonusSanity" class="resource-label">Sanity</label>
              <input type="text" name="data.bonusSanity" value="{{data.bonusSanity}}" data-dtype="Number"/>
            </div>
          </div>

          <h2>Wastah</h2>
          {{editor content=data.wastah target="data.wastah" button=true owner=owner editable=editable}}

          <h2>Enlightenment</h2>
          {{editor content=data.enlightenment target="data.enlightenment" button=true owner=owner editable=editable}}
        </div>
    </section>
</form>